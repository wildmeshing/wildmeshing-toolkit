<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "https://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
<meta http-equiv="Content-Type" content="text/xhtml;charset=UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=9"/>
<meta name="generator" content="Doxygen 1.9.1"/>
<meta name="viewport" content="width=device-width, initial-scale=1"/>
<title>Wildmeshing Toolkit: Code Structure and Manual</title>
<link href="tabs.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="jquery.js"></script>
<script type="text/javascript" src="dynsections.js"></script>
<link href="search/search.css" rel="stylesheet" type="text/css"/>
<script type="text/javascript" src="search/searchdata.js"></script>
<script type="text/javascript" src="search/search.js"></script>
<link href="doxygen.css" rel="stylesheet" type="text/css" />
</head>
<body>
<div id="top"><!-- do not remove this div, it is closed by doxygen! -->
<div id="titlearea">
<table cellspacing="0" cellpadding="0">
 <tbody>
 <tr style="height: 56px;">
  <td id="projectalign" style="padding-left: 0.5em;">
   <div id="projectname">Wildmeshing Toolkit
   </div>
  </td>
 </tr>
 </tbody>
</table>
</div>
<!-- end header part -->
<!-- Generated by Doxygen 1.9.1 -->
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
var searchBox = new SearchBox("searchBox", "search",false,'Search','.html');
/* @license-end */
</script>
<script type="text/javascript" src="menudata.js"></script>
<script type="text/javascript" src="menu.js"></script>
<script type="text/javascript">
/* @license magnet:?xt=urn:btih:cf05388f2679ee054f2beb29a391d25f4e673ac3&amp;dn=gpl-2.0.txt GPL-v2 */
$(function() {
  initMenu('',true,false,'search.php','Search');
  $(document).ready(function() { init_search(); });
});
/* @license-end */</script>
<div id="main-nav"></div>
<!-- window showing the filter options -->
<div id="MSearchSelectWindow"
     onmouseover="return searchBox.OnSearchSelectShow()"
     onmouseout="return searchBox.OnSearchSelectHide()"
     onkeydown="return searchBox.OnSearchSelectKey(event)">
</div>

<!-- iframe showing the search results (closed by default) -->
<div id="MSearchResultsWindow">
<iframe src="javascript:void(0)" frameborder="0" 
        name="MSearchResults" id="MSearchResults">
</iframe>
</div>

</div><!-- top -->
<div class="PageDoc"><div class="header">
  <div class="headertitle">
<div class="title">Code Structure and Manual </div>  </div>
</div><!--header-->
<div class="contents">
<div class="textblock"><p>The wildmeshing toolkit provides a set of algorithms and corresponding data structure for supporting the creation, editing, and optimization of meshes in 2D and 3D. It is designed to support algorithms requiring to store data on a mesh whose connectivity is changing: for example in adaptive refinement, shape optimization, or multi-material mesh optimization.</p>
<h1><a class="anchor" id="autotoc_md20"></a>
Key Concepts</h1>
<ol type="1">
<li><em>Attributes store per-simplex data.</em> This includes the connectivity <code><a class="el" href="_attribute_8hpp_source.html">Attribute.hpp</a></code>.</li>
<li><em>Tuples.</em> A tuple <code><a class="el" href="_tuple_8hpp_source.html">Tuple.hpp</a></code> identifies a position on the mesh, and it is the only way to access attributes (and thus navigate). Indices of simplices are purposedly hiddern and not accessible to the public API.</li>
<li><em>Checkpointing.</em> The library supports checkpointing to implement convenient operation rollback at any point during an operation.</li>
<li><em>Invariants.</em> Mesh invariants <code><a class="el" href="_invariant_8hpp_source.html">Invariant.hpp</a></code> (such as non-inversion) are automatically checked after each operation and the operation is rolled back if it does not satisfy the invariants.</li>
<li><em>Topological Navigation.</em> The library directly supports topological navigation using a tuple, and standard topological operators (star, link, order, etc) in a dimension independent manner <code><a class="el" href="_simplex_collection_8hpp_source.html">SimplexCollection.hpp</a></code>. Efficient replacement for the most common operations is also supported to improve performance for common operations.</li>
<li><em>Multi Mesh.</em> The library supports embedding of lower-dimensional manifold meshes <code><a class="el" href="_multi_mesh_manager_8hpp_source.html">MultiMeshManager.hpp</a></code>, and provides a mechanism to update them as local operations are applied to either the background mesh or the embedded ones.</li>
<li><em>Optimization.</em> The library can automatically minimize, through a combination of smooth (vertex relocation) and discrete (split,collapse,swap) operations, a differentiable energy specified on any of its simplices <code><a class="el" href="_function_8hpp_source.html">Function.hpp</a></code>.</li>
</ol>
<h1><a class="anchor" id="autotoc_md21"></a>
Data Structure</h1>
<p>The toolkit implements an abstract interface <code><a class="el" href="_mesh_8hpp_source.html">Mesh.hpp</a></code>, which supports simplicial meshes of dimension 0 to 3. The navigation is dimension agnostic and based on a <code><a class="el" href="_tuple_8hpp_source.html">Tuple.hpp</a></code>. We currently implement this interface for 4 simplicial mesh types: <code><a class="el" href="_point_mesh_8hpp_source.html">PointMesh.hpp</a></code>, <code><a class="el" href="_edge_mesh_8hpp_source.html">EdgeMesh.hpp</a></code>, <code>TriangleMesh.hpp</code>, and <code><a class="el" href="_tet_mesh_8hpp_source.html">TetMesh.hpp</a></code>.</p>
<p>Internally, the data structure is stored as:</p><ul>
<li>A vector of simplices for each dimension storing the simplex attributes (note that each simplex has thus a unique global index, which is its position in this vector)</li>
<li>A set of standard attributes storing the connectivity.</li>
</ul>
<p>For connectivity, we store the complete relationship between each top simplex of dimension d and both its neighbours connected through a d-1 face and its faces (for a triangle mesh, TT, TE, TV), and one representative for the inverse relationships (for a triangle mesh, every vertex stores the index of one of its incident triangles, and every edge also stores an index of one of the incident triangles). Note that we use only indices internally, but we <b>do not expose</b> this information on purpose to avoid the temptation to use indices in user code (which might be invalidated by local operations).</p>
<p>The data structure is not allowed to dynamically resize during local operations: it is responsability of the user to reserve enough memory before attempting to modify a mesh with local operations. Unused memory can be reclaimed by using the function TODO.</p>
<h2><a class="anchor" id="autotoc_md22"></a>
Tuple</h2>
<p>A <code><a class="el" href="classwmtk_1_1_tuple.html">wmtk::Tuple</a></code> is internally represented as a single global index to its top simplex, and a collection of local indices identifying the local faces (for a triangle mesh, the tuple points to the triangle, and it has two local indices to identify the vertex and edge). Tuple implements switch operations that allows to navigate the mesh by changing one of the pointed simplexes: the navigation is performed by either accessing an adjency topological relation to move to a different top simplex, or by changing the local indices. The change in local indexes is tabulated <code>local_switch_tuple.hpp</code>, making the navigation efficient. The table is generated with the scripts in the autogen folder.</p>
<h1><a class="anchor" id="autotoc_md23"></a>
Repository Structure</h1>
<p>The main classes in the toolkit are:</p>
<ol type="1">
<li>Mesh <code><a class="el" href="_mesh_8hpp_source.html">Mesh.hpp</a></code>. It stores a set of attributes and allows navigation and execution of operations. The types of meshes supported are: points (<code><a class="el" href="_point_mesh_8hpp_source.html">PointMesh.hpp</a></code>), edges (<code><a class="el" href="_edge_mesh_8hpp_source.html">EdgeMesh.hpp</a></code>), triangles (<code><a class="el" href="_tri_mesh_8hpp_source.html">TriMesh.hpp</a></code>) and tetrahedra (<code><a class="el" href="_tet_mesh_8hpp_source.html">TetMesh.hpp</a></code>).</li>
<li>Tuple <code><a class="el" href="_tuple_8hpp_source.html">Tuple.hpp</a></code>. A tuple is a ordered set of simplices, containing one simplex for each dimension. It allows navigation by using switch operations, see <a href="https://dl.acm.org/doi/10.1145/73833.73858">Representing geometric structures in d dimensions: topology and order</a>.</li>
<li>Simplex <code>Simplex.hpp</code>. A simplex uniquely identifies a simplex in a mesh, and it is internally implemented as a primitive type and a tuple. A collection of simplexes can be stored in a <code><a class="el" href="_simplex_collection_8hpp_source.html">SimplexCollection.hpp</a></code>. The operations that return collection of simplexes are: <code><a class="el" href="boundary_8hpp_source.html">boundary.hpp</a></code>, <code><a class="el" href="closed__star_8hpp_source.html">closed_star.hpp</a></code>, <code><a class="el" href="link_8hpp_source.html">link.hpp</a></code>, <code><a class="el" href="open__star_8hpp_source.html">open_star.hpp</a></code>.</li>
<li>An accessor <code><a class="el" href="_accessor_8hpp_source.html">Accessor.hpp</a></code> allows to access the attributes of the mesh. There are multiple accessors that provide different access levels: read-only (<code><a class="el" href="_const_accessor_8hpp_source.html">ConstAccessor.hpp</a></code>) and read-write (<code><a class="el" href="_mutable_accessor_8hpp_source.html">MutableAccessor.hpp</a></code>)</li>
</ol>
<h2><a class="anchor" id="autotoc_md24"></a>
attribute â€” Management of Mesh Attributes, Caching, and Checkpoints</h2>
<p>A mesh attribute <code><a class="el" href="_mesh_attributes_8hpp_source.html">MeshAttributes.hpp</a></code> stores an attribute of a fixed type (char,long,double,Rational) and of a fixed lenght. The attribute can be attached to a simplex of a desired dimension dim. A mesh has a set of default attributes, hidden and not accessible, that store the mesh connectivity (see for example <code><a class="el" href="_tri_mesh_8hpp_source.html">TriMesh.hpp</a></code>). Access to attributes is possible only through a Tuple <code><a class="el" href="_tuple_8hpp_source.html">Tuple.hpp</a></code>.</p>
<p>TODO: Explain the different types of mesh attributes</p>
<p>TODO: Explain how to start a checkpoint/rollback</p>
<h2><a class="anchor" id="autotoc_md25"></a>
autogen â€” Automatic Generation of Connectivity Tables</h2>
<p>This folder stores a set of scripts that generate navigation tables for the local navigation inside a simplex.</p>
<h2><a class="anchor" id="autotoc_md26"></a>
function</h2>
<p>TODO: Refactor in progress</p>
<h2><a class="anchor" id="autotoc_md27"></a>
invariants</h2>
<p>A <code>wmtk::Invariant</code> is a condition that can be test before <code>wmtk::Invariant::before</code> or after <code>wmtk::Invariant::after</code> an operation. If the condition is not satisfied, the operation is either not executed, or rolled back. An invariant can be applied to a simplex of any dimension, and should not rely on the before and after functions being called in order. Example of common invariants are checking for a triangle inversion <code>wmtk::TriangleInersionInvariant</code> or limiting the size of an edge <code><a class="el" href="classwmtk_1_1_min_edge_length_invariant.html">wmtk::MinEdgeLengthInvariant</a></code>. Invariants are associated with operations at runtime: each operation stores a collection of invariants <code>wmtk::TupleOperation::invariants</code>.</p>
<h2><a class="anchor" id="autotoc_md28"></a>
io</h2>
<p>TODO: Explain how to load and save a mesh, and specify the hdf5 format</p>
<h2><a class="anchor" id="autotoc_md29"></a>
multimesh</h2>
<p>TODO</p>
<h2><a class="anchor" id="autotoc_md30"></a>
operations</h2>
<p>TODO:</p>
<p>TODO: refactor in progress</p>
<h2><a class="anchor" id="autotoc_md31"></a>
optimization</h2>
<p>TODO: refactor in progress</p>
<h2><a class="anchor" id="autotoc_md32"></a>
simplex</h2>
<p>This folder contains a set of functions to extract and process simplicial meshes. A <code>wmtk::Simplex</code> is internally represented as a <code><a class="el" href="classwmtk_1_1_tuple.html">wmtk::Tuple</a></code> and the simplex type <code>wmtk::PrimitiveType</code>. The functions supported are: <code><a class="el" href="closed__star_8hpp_source.html">closed_star.hpp</a></code>, <code><a class="el" href="cofaces__single__dimension_8hpp_source.html">cofaces_single_dimension.hpp</a></code>, <code><a class="el" href="faces_8hpp_source.html">faces.hpp</a></code>, <code><a class="el" href="link_8hpp_source.html">link.hpp</a></code>, <code><a class="el" href="open__star_8hpp_source.html">open_star.hpp</a></code>, <code><a class="el" href="top__dimension__cofaces_8hpp_source.html">top_dimension_cofaces.hpp</a></code>. We refer to <a href="https://core.ac.uk/download/pdf/82717779.pdf">P.L. Homeomorphic Manifolds are Equivalent by Elementary Shellingst</a> for the formal definition. These functions also have an iterable version (i.e. <code><a class="el" href="closed__star__iterable_8hpp_source.html">closed_star_iterable.hpp</a></code>), which should be used when possible, as it avoids unnecessary memory allocations.</p>
<h2><a class="anchor" id="autotoc_md33"></a>
utils</h2>
<p>Contains the logger (<code><a class="el" href="_logger_8hpp_source.html">Logger.hpp</a></code>), the rational number type (<code><a class="el" href="_rational_8hpp_source.html">Rational.hpp</a></code>) and additional minor utilities. </p>
</div></div><!-- contents -->
</div><!-- PageDoc -->
<!-- start footer part -->
<hr class="footer"/><address class="footer"><small>
Generated by&#160;<a href="https://www.doxygen.org/index.html"><img class="footer" src="doxygen.svg" width="104" height="31" alt="doxygen"/></a> 1.9.1
</small></address>
</body>
</html>
